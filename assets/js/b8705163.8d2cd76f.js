"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8855],{3905:function(e,t,r){r.d(t,{Zo:function(){return l},kt:function(){return f}});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var c=n.createContext({}),p=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},l=function(e){var t=p(e.components);return n.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=p(r),f=o,m=d["".concat(c,".").concat(f)]||d[f]||u[f]||a;return r?n.createElement(m,i(i({ref:t},l),{},{components:r})):n.createElement(m,i({ref:t},l))}));function f(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var p=2;p<a;p++)i[p]=r[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},8857:function(e,t,r){r.r(t),r.d(t,{assets:function(){return l},contentTitle:function(){return c},default:function(){return f},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return u}});var n=r(7462),o=r(3366),a=(r(7294),r(3905)),i=["components"],s={sidebar_position:97},c="Crossfade",p={unversionedId:"guides/crossfade",id:"guides/crossfade",title:"Crossfade",description:"Crossfading is merging the current playback and the next playback at the same time, with the current fading out and the next fading in. This by definition requires 2 playback sources and players. It introduces a whole spaghetti of player control problems and is only custom implemented on Android.",source:"@site/docs/guides/crossfade.md",sourceDirName:"guides",slug:"/guides/crossfade",permalink:"/docs/next/guides/crossfade",editUrl:"https://github.com/doublesymmetry/react-native-track-player/tree/main/docs/docs/guides/crossfade.md",tags:[],version:"current",sidebarPosition:97,frontMatter:{sidebar_position:97},sidebar:"app",previous:{title:"Android Auto Support",permalink:"/docs/next/guides/android-auto"},next:{title:"Developing with Expo",permalink:"/docs/next/guides/with-expo"}},l={},u=[{value:"Concept",id:"concept",level:2},{value:"Usage",id:"usage",level:2}],d={toc:u};function f(e){var t=e.components,r=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"crossfade"},"Crossfade"),(0,a.kt)("p",null,"Crossfading is merging the current playback and the next playback at the same time, with the current fading out and the next fading in. This by definition requires 2 playback sources and players. It introduces a whole spaghetti of player control problems and is only custom implemented on Android."),(0,a.kt)("h2",{id:"concept"},"Concept"),(0,a.kt)("p",null,'on Android this is built by 2 exoplayers rotating on crossfading. I copied the ForwardingPlayer in media3 out to accept 2 exoplayers. On crossfading, the "main" player responsible for the forwarded controls and metadata displays will rotate and emit metadata.'),(0,a.kt)("h2",{id:"usage"},"Usage"),(0,a.kt)("p",null,"RNTP keeps both players queue the same."),(0,a.kt)("p",null,"To enable crossfading, setupPlayer with crossfade: true."),(0,a.kt)("p",null,"You should first prepare the crossfading player well ahead of crossfading via ",(0,a.kt)("inlineCode",{parentName:"p"},"TP.crossFadePrepare(previous=true/false)"),". This primes the rotating player's current media index to the current player's, then skip to next or previous, then prepare for playback."),(0,a.kt)("p",null,"Then to perform crossfading, invoke TP.crossfade."),(0,a.kt)("p",null,"see the example app's 2nd row of controls. rotate button is ",(0,a.kt)("inlineCode",{parentName:"p"},"TP.crossFadePrepare"),", next button is ",(0,a.kt)("inlineCode",{parentName:"p"},"TP.crossFade"),"."))}f.isMDXComponent=!0}}]);