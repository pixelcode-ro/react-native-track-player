<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-guides/android-auto">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="search" type="application/opensearchdescription+xml" title="React Native Track Player" href="/opensearch.xml"><title data-rh="true">Android Auto Support | React Native Track Player</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://rntp.dev/docs/next/guides/android-auto"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Android Auto Support | React Native Track Player"><meta data-rh="true" name="description" content="Make sure to read through Google&#x27;s guidelines before adding Android Auto support to your RNTP app! Not all features in the article are implemented so PRs are always welcome. Also do note this lib has migrated to media3 and Android Auto still refers to the exoplayer2 implementation. For any questions please harass the media3 team instead."><meta data-rh="true" property="og:description" content="Make sure to read through Google&#x27;s guidelines before adding Android Auto support to your RNTP app! Not all features in the article are implemented so PRs are always welcome. Also do note this lib has migrated to media3 and Android Auto still refers to the exoplayer2 implementation. For any questions please harass the media3 team instead."><link data-rh="true" rel="icon" href="/img/logo.png"><link data-rh="true" rel="canonical" href="https://rntp.dev/docs/next/guides/android-auto"><link data-rh="true" rel="alternate" href="https://rntp.dev/docs/next/guides/android-auto" hreflang="en"><link data-rh="true" rel="alternate" href="https://rntp.dev/docs/next/guides/android-auto" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://CYSR91W7SU-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.b90c8a92.css">
<link rel="preload" href="/assets/js/runtime~main.ca3ada6a.js" as="script">
<link rel="preload" href="/assets/js/main.6cc61fa5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="React Native Track Player Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="React Native Track Player Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">React Native Track Player</b></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/next/intro">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next/guides/android-auto">Next</a></li><li><a class="dropdown__link" href="/docs/intro">4.1</a></li><li><a class="dropdown__link" href="/docs/4.0/intro">4.0</a></li><li><a class="dropdown__link" href="/docs/3.2/intro">3.2</a></li><li><a class="dropdown__link" href="/docs/3.1/intro">3.1</a></li><li><a class="dropdown__link" href="/docs/2.1/intro">2.1</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link navbar__link--active" href="/docs/next/intro">Intro</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/next/basics/installation">Docs</a><a href="https://github.com/doublesymmetry/react-native-track-player" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/intro">Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/basics/installation">The Basics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/api/events">API Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/next/guides/offline-playback">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/guides/offline-playback">Offline Playback</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/guides/saving-progress">Saving Progress</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/guides/sleeptimers">Sleeptimers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/guides/multitrack-progress">Multitrack Progress</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/guides/play-button">Play Buttons</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/next/guides/android-auto">Android Auto Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/guides/crossfade">Crossfade</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/guides/with-expo">Developing with Expo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/guides/amazon-fire-support">Amazon FireOS Support</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/v2-migration">Migrating from v1 to v2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/v3-migration">Migrating from v2 to v3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/v3.1.0-migration">Migrating from v3.1.0 to v3.2.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/v4-migration">Migrating from v3.2 to v4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/troubleshooting">Troubleshooting</a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->React Native Track Player<!-- --> <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/intro">latest version</a></b> (<!-- -->4.1<!-- -->).</div></div><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/">üè†</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">Guides</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">Android Auto Support</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Android Auto Support</h1><p>Make sure to read through <a href="https://developer.android.com/training/cars/media" target="_blank" rel="noopener noreferrer">Google&#x27;s guidelines</a> before adding Android Auto support to your RNTP app! Not all features in the article are implemented so PRs are always welcome. Also do note this lib has migrated to media3 and Android Auto still refers to the exoplayer2 implementation. For any questions please <a href="https://github.com/androidx/media/issues" target="_blank" rel="noopener noreferrer">harass the media3 team</a> instead.</p><p>See the example app and <a href="https://github.com/podverse/podverse-rn/pull/1928" target="_blank" rel="noopener noreferrer">Podverse&#x27;s PR</a> as examples adding Android Auto support to an existing RNTP app.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="concept">Concept<a class="hash-link" href="#concept" title="Direct link to heading">‚Äã</a></h2><p>You can see how my idea went to implementation in <a href="https://github.com/doublesymmetry/react-native-track-player/discussions/1984" target="_blank" rel="noopener noreferrer">this discussion</a>. In short, the HeadlessJsTaskService in RN&#x27;s repository is copied out and manually tuned to extend MediaLibraryService instead of Service.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="rn-version-compatibility">RN Version Compatibility<a class="hash-link" href="#rn-version-compatibility" title="Direct link to heading">‚Äã</a></h2><p>HeadlessJsTaskService.java does change across RN versions, for example from RN 0.71. RNTP&#x27;s HeadlessJsTaskService will use whatever compatible with the most recent RN version. You may need to manually edit HeadlessJsMediaService.java to make it compatible with your current RN version. See <a href="https://github.com/lovegaoshi/react-native-track-player/tree/dev-podverse-aa" target="_blank" rel="noopener noreferrer">Podverse&#x27;s RNTP fork</a> that uses RN 0.66.</p><p>I can only guarantee specifically this lib&#x27;s compatibility is to whatever <a href="https://github.com/lovegaoshi/azusa-player-mobile" target="_blank" rel="noopener noreferrer">APM</a> uses, which is almost always only the newest.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="necessary-declarations">Necessary Declarations<a class="hash-link" href="#necessary-declarations" title="Direct link to heading">‚Äã</a></h2><p>Enable Google voice assistant permissions (must be implemented per Google&#x27;s AA guidelines) in your project&#x27;s AndroidManifest.xml by adding this below:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;intent-filter&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;action android:name=&quot;android.media.action.MEDIA_PLAY_FROM_SEARCH&quot; /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/intent-filter&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Then add Android Auto declarations as so:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;meta-data android:name=&quot;com.google.android.gms.car.application&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            android:resource=&quot;@xml/automotive_app_desc&quot;/&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Make <code>automotive_app_desc.xml</code> under your project&#x27;s <code>android/src/main/res/xml</code> with the content below:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;automotiveApp&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;uses name=&quot;media&quot;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/automotiveApp&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Lastly enable any app to show in Android Auto via Settings -&gt; Apps -&gt; Android Auto -&gt; In-App Notification Settings -&gt; vertical dot on the top right corner -&gt; Developer Settings -&gt; Unknown Sources. This is necessary for any app not in the play store yet.</p><p>This will immediately enable your RNTP app to have synced media control in Android Auto.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="content-hierarchy">Content Hierarchy<a class="hash-link" href="#content-hierarchy" title="Direct link to heading">‚Äã</a></h2><p>Android Auto can show <code>playable</code> (songs) and <code>browsable</code> (playlists) <code>MediaItem</code>s. These MediaItems are organized like a tree structure, starting from the root branching out. In addition, <code>browsable</code> MediaItems at the root level will become tabs shown at the top. AA supports a maximum of 4 tabs.</p><p><code>MediaItem</code> must have a <code>Title</code>, <code>mediaID</code> and <code>playable</code> field. In addition, <code>Subtitle</code> (artist) and <code>iconUri</code> (album art) can be specified.</p><p>AA content hierarchy is a dict with <code>mediaID</code>s as keys and a list of <code>MediaItem</code>s as values. See the demo hierarchy here.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="fetching-contents">Fetching Contents<a class="hash-link" href="#fetching-contents" title="Direct link to heading">‚Äã</a></h2><p>Contents can be refreshed by repeatly calling TrackPlayer.setBrowseTree. Sometimes you do not want to load your contents all at once to the browseTree, say because it&#x27;s quite heavy on internet connections. You may programmatically load data via <code>Event.RemoteBrowse</code> that returns the browsable mediaItem&#x27;s <code>mediaID</code> a user has clicked. Then you can update content as above and AA will work as so. See Podverse.</p><p>Because content refresh triggers MediaBrowserService.notifyChildrenChange, this effectively triggers RemoteBrowse again; there is evidence all tabs are triggered this way, not leaves. so if you do not set a caching system to prevent this from loading, add a debounce check. But do not use a debounce hook. See Podverse.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="event-callback">Event Callback<a class="hash-link" href="#event-callback" title="Direct link to heading">‚Äã</a></h2><p>Android Auto requires 3 events to be handled: <code>Event.RemotePlayId</code> <code>Event.RemotePlaySearch</code> and <code>Event.RemoteSkip</code>. <code>Event.RemotePlayId</code> is emitted when users click playable items in AA&#x27;s content hierarchy. <code>Event.RemotePlaySearch</code> is emitted when users use google voice assistant in Android Auto, which must be implemented per Google&#x27;s AA guidelines. <code>Event.RemoteSkip</code> is responsible for playback from users clicking in the &quot;queue&quot; list from the top right corner. This should be handled as <code>TrackPlayer.skip(event.index).then(() =&gt; TrackPlayer.play());</code>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="headless-start">Headless Start<a class="hash-link" href="#headless-start" title="Direct link to heading">‚Äã</a></h2><p>Since media3, MusicService is now automatically started by the system/MediaLibraryService and allows a better headless implementation. This may be applicable to the old exoplayer2 implementation, but I&#x27;m not bothered to check. What&#x27;s important is now MusicService will wake the js entry point, executes everything in index.js, but do NOT render the view. Thus any registered callbacks work (eg. registerHeadlessTask), but hooks do not.</p><p>For a clean headless start implementation, the app initialization and specifically PlayFromSearch and PlayFromMediaId events have to be handled outside of a hook. Please refer to <a href="https://github.com/lovegaoshi/azusa-player-mobile/pull/566" target="_blank" rel="noopener noreferrer">APM&#x27;s PR</a> for an example.</p><p>Below is the old wake Activity implementation.</p><p>Android Auto only starts the MediaBrowserCompactService, not the activity of your app. RNTP itself does separate its Service (MusicService) from Activity (RN App), however because RNTP has to be initialized in the RN side, technically it is not possible to start Android Auto without starting the RN Activity. With a native android app, one would refactor all logic into MusicService and leave Activity only showing the UI, but this is not possible for RN apps. There are workarounds:</p><p>You must enable some way to start activity from a background service. The easiest one is to enable android.permission.SYSTEM_ALERT_WINDOW and ask your users to enable &quot;draw over other apps.&quot; This will trigger the app to start when RNActivity is either isDestoryed() or not exist, and the service waking it is in the whitelist (android auto and systemui). Your app will be automatically brought to foreground.</p><p>You may also have noticed Android Activities cannot start when the screen is locked/off. This is an intended behavior of Android. The workaround is to enable in AndroidManifest.xml</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">            android:showOnLockScreen=&quot;true&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            android:turnScreenOn=&quot;true&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>or add this in the onCreate function of RNActivity:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O_MR1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      setShowWhenLocked(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      setTurnScreenOn(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>This allows the RN Activity to overlay on top of the lock screen and start itself normally. However now the activity will always stay on top of the lock screen, meaning this app can be now used without unlocking. To work around this again, create a native module call to turn it off after your app is fully initialized.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O_MR1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      setShowWhenLocked(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      setTurnScreenOn(false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="album-art">Album Art<a class="hash-link" href="#album-art" title="Direct link to heading">‚Äã</a></h2><p>I originally enabled album art via <a href="https://github.com/lovegaoshi/KotlinAudio/commit/7a3d90b5b7b548e45b8b54ffcf62eac5c795bc14" target="_blank" rel="noopener noreferrer">https://github.com/lovegaoshi/KotlinAudio/commit/7a3d90b5b7b548e45b8b54ffcf62eac5c795bc14</a> but <a href="https://developer.android.com/training/cars/media/#display-artwork" target="_blank" rel="noopener noreferrer">google&#x27;s guidelines</a> seem to contradict with that. nevertheless however RNTP is currently set up (for ex <a href="https://github.com/lovegaoshi/react-native-track-player/blob/6f634594f24aa1974b2c8cdc6848b8b349cccdf0/android/src/main/java/com/doublesymmetry/kotlinaudio/notification/NotificationManager.kt#L389" target="_blank" rel="noopener noreferrer">https://github.com/lovegaoshi/react-native-track-player/blob/6f634594f24aa1974b2c8cdc6848b8b349cccdf0/android/src/main/java/com/doublesymmetry/kotlinaudio/notification/NotificationManager.kt#L389</a>) for remote urls it works great, but for local uris (file:///) and embedded covers within local media files it wont work.</p><p>for local uris while I do not have a use and no rigorous tests yet, I believe converting the file:/// uri to a content:// one, as specified in the google guidelines, would work. u can see how i did this via a fileProvider: <a href="https://github.com/lovegaoshi/azusa-player-mobile/pull/449" target="_blank" rel="noopener noreferrer">https://github.com/lovegaoshi/azusa-player-mobile/pull/449</a></p><p>for embedded covers this has to be first resolved and written to a file, then load the content:// uri as in the google guidelines. I tried with both ffmpeg and MediaMetadataRetriever, opted for the latter in the end for simplicity. commit is here: <a href="https://github.com/lovegaoshi/react-native-track-player/commit/6f634594f24aa1974b2c8cdc6848b8b349cccdf0" target="_blank" rel="noopener noreferrer">https://github.com/lovegaoshi/react-native-track-player/commit/6f634594f24aa1974b2c8cdc6848b8b349cccdf0</a></p><p>the specific implementation I have does have a drawback taht the local file is written in the /Pictures folder. you might be able to write to cache using File() then convert to content:// with a fileProvider, but I chose the simplicity of MediaStore and can deal with this drawback.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="known-issues">Known Issues<a class="hash-link" href="#known-issues" title="Direct link to heading">‚Äã</a></h2><p>JumpForward and JumpBackward may not show on Android &lt;13 devices. To resolve this, implement these buttons as CustomActions, just like how they are handled under Android &gt;=13. You need to implement changes in KotlinAudio. Note this will introduce <a href="https://github.com/doublesymmetry/react-native-track-player/issues/1970" target="_blank" rel="noopener noreferrer">duplicate custom actions buttons</a> so more patches are needed. See Podverse&#x27;s KotlinAudio fork.</p><p>If <a href="https://github.com/lovegaoshi/react-native-track-player/issues/26" target="_blank" rel="noopener noreferrer">Event.RemoteBrowse is not firing for the first two tabs</a>, you may need to reinstall android auto.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="app-showcase">App Showcase<a class="hash-link" href="#app-showcase" title="Direct link to heading">‚Äã</a></h2><p><a href="https://play.google.com/store/apps/details?id=com.noxplay.noxplayer" target="_blank" rel="noopener noreferrer">APM</a> and <a href="https://play.google.com/store/apps/details?id=com.podverse" target="_blank" rel="noopener noreferrer">Podverse</a> use a customized fork and are both on the google play store in production with auto support.</p><p>Getting pass Play Store&#x27;s review process for an auto suppported app is tough. Here are a few issues we encountered:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Issue found: App doesn&#x27;t perform as expected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Your app does not perform all functions properly or as expected from a user perspective.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For example, your app does not load media content in Android Auto.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>This was due to APM never performed content updates via <code>TrackPlayer.setBrowseTree</code> (albeit initializes) thoughout the app&#x27;s lifecycle. I think a human tester intervened and expected what my app does.</p><p><a href="https://github.com/lovegaoshi/azusa-player-mobile/pull/209" target="_blank" rel="noopener noreferrer">https://github.com/lovegaoshi/azusa-player-mobile/pull/209</a></p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">something about media not responsive to voice commands</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>This was due to Podverse did not handle voice commands. Although play store refused to approve repeatly after fix until an appeal was submitted, then it was approved.</p><p><a href="https://github.com/podverse/podverse-rn/pull/1969" target="_blank" rel="noopener noreferrer">https://github.com/podverse/podverse-rn/pull/1969</a></p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">your app does not respond after issuing a voice command.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>This is a recent rejection I experienced since this year and it could be JS bugs I accidentally introduced or now a native handler to MEDIA_PLAY_FROM_SEARCH is expected; but for the PR that fixed this as a reference, see <a href="https://github.com/lovegaoshi/azusa-player-mobile/pull/407" target="_blank" rel="noopener noreferrer">https://github.com/lovegaoshi/azusa-player-mobile/pull/407</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/doublesymmetry/react-native-track-player/tree/main/docs/docs/guides/android-auto.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/next/guides/play-button"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Play Buttons</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/next/guides/crossfade"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Crossfade</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#concept" class="table-of-contents__link toc-highlight">Concept</a></li><li><a href="#rn-version-compatibility" class="table-of-contents__link toc-highlight">RN Version Compatibility</a></li><li><a href="#necessary-declarations" class="table-of-contents__link toc-highlight">Necessary Declarations</a></li><li><a href="#content-hierarchy" class="table-of-contents__link toc-highlight">Content Hierarchy</a></li><li><a href="#fetching-contents" class="table-of-contents__link toc-highlight">Fetching Contents</a></li><li><a href="#event-callback" class="table-of-contents__link toc-highlight">Event Callback</a></li><li><a href="#headless-start" class="table-of-contents__link toc-highlight">Headless Start</a></li><li><a href="#album-art" class="table-of-contents__link toc-highlight">Album Art</a></li><li><a href="#known-issues" class="table-of-contents__link toc-highlight">Known Issues</a></li><li><a href="#app-showcase" class="table-of-contents__link toc-highlight">App Showcase</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Intro</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/basics/installation">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/api/events">API Reference</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/doublesymmetry/react-native-track-player" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/ya2XDCR" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/react-native-track-player" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/sponsors/doublesymmetry" target="_blank" rel="noopener noreferrer" class="footer__link-item">Become A Sponsor<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2025 Double Symmetry GmbH. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ca3ada6a.js"></script>
<script src="/assets/js/main.6cc61fa5.js"></script>
</body>
</html>